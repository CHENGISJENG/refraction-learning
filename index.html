<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªå­¸ç¶²ç«™--æŠ˜å°„(æ–¯æ¶…è€³å®šå¾‹)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .animate-draw {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: draw 2s forwards;
        }
        @keyframes draw {
            to { stroke-dashoffset: 0; }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons Components (Inline SVGs) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6" /></IconBase>;
        const ChevronLeft = (props) => <IconBase {...props}><polyline points="15 18 9 12 15 6" /></IconBase>;
        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></IconBase>;
        const Calculator = (props) => <IconBase {...props}><rect x="4" y="2" width="16" height="20" rx="2" /><line x1="8" y1="6" x2="16" y2="6" /><line x1="16" y1="14" x2="16" y2="14" /><line x1="12" y1="14" x2="12" y2="14" /><line x1="8" y1="14" x2="8" y2="14" /><line x1="16" y1="18" x2="16" y2="18" /><line x1="12" y1="18" x2="12" y2="18" /><line x1="8" y1="18" x2="8" y2="18" /></IconBase>;
        const Play = (props) => <IconBase {...props}><polygon points="5 3 19 12 5 21 5 3" /></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></IconBase>;
        const HelpCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10" /><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" /><line x1="12" y1="17" x2="12.01" y2="17" /></IconBase>;
        const RotateCcw = (props) => <IconBase {...props}><polyline points="1 4 1 10 7 10" /><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" /></IconBase>;
        const TrendingUp = (props) => <IconBase {...props}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></IconBase>;
        const PenTool = (props) => <IconBase {...props}><path d="M12 19l7-7 3 3-7 7-3-3z" /><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" /><path d="M2 2l7.586 7.586" /><circle cx="11" cy="11" r="2" /></IconBase>;
        const Table = (props) => <IconBase {...props}><path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18" /></IconBase>;

        // --- Main App Component ---
        const SnellsLawLearning = () => {
            const [currentSlide, setCurrentSlide] = useState(0);

            // Shared Constants for visuals
            const SVG_SIZE = 300;
            const CENTER_X = SVG_SIZE / 2;
            const CENTER_Y = SVG_SIZE / 2;
            const RAY_LENGTH = 120;

            // --- SLIDE 1: åŸºç¤æ¦‚å¿µ ---
            const BasicConceptSlide = () => {
                const radius = 40;
                const rad_i = 30 * Math.PI / 180;
                const startX_i = CENTER_X;
                const startY_i = CENTER_Y - radius;
                const endX_i = CENTER_X - radius * Math.sin(rad_i);
                const endY_i = CENTER_Y - radius * Math.cos(rad_i);

                const rad_r = 20 * Math.PI / 180;
                const startX_r = CENTER_X;
                const startY_r = CENTER_Y + radius;
                const endX_r = CENTER_X + radius * Math.sin(rad_r);
                const endY_r = CENTER_Y + radius * Math.cos(rad_r);

                return (
                <div className="flex flex-col items-center h-full">
                    <h2 className="text-2xl font-bold text-blue-800 mb-4">ç¬¬ä¸€ç« ï¼šå…‰çš„æŠ˜å°„ (Refraction)</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl items-center">
                    <div className="bg-white p-6 rounded-xl shadow-lg border-2 border-blue-100 flex flex-col items-center">
                        <svg width={SVG_SIZE} height={SVG_SIZE} className="overflow-visible">
                        <rect x="0" y="0" width={SVG_SIZE} height={CENTER_Y} fill="#e0f2fe" opacity="0.5" />
                        <rect x="0" y={CENTER_Y} width={SVG_SIZE} height={CENTER_Y} fill="#bfdbfe" opacity="0.5" />
                        
                        <line x1="0" y1={CENTER_Y} x2={SVG_SIZE} y2={CENTER_Y} stroke="#334155" strokeWidth="2" />
                        <text x="10" y={CENTER_Y - 10} className="text-xs text-slate-500">ä»‹è³ª 1 (ç©ºæ°£)</text>
                        <text x="10" y={CENTER_Y + 20} className="text-xs text-slate-500">ä»‹è³ª 2 (ç»ç’ƒ/æ°´)</text>

                        <line x1={CENTER_X} y1="20" x2={CENTER_X} y2={SVG_SIZE - 20} stroke="#94a3b8" strokeWidth="2" strokeDasharray="5,5" />
                        <text x={CENTER_X + 5} y="40" className="text-xs text-slate-500">æ³•ç·š (Normal)</text>

                        <line x1={CENTER_X - RAY_LENGTH*Math.sin(rad_i)} y1={CENTER_Y - RAY_LENGTH*Math.cos(rad_i)} x2={CENTER_X} y2={CENTER_Y} stroke="#ef4444" strokeWidth="3" markerEnd="url(#arrow)" />
                        <line x1={CENTER_X} y1={CENTER_Y} x2={CENTER_X + RAY_LENGTH*Math.sin(rad_r)} y2={CENTER_Y + RAY_LENGTH*Math.cos(rad_r)} stroke="#ef4444" strokeWidth="3" markerEnd="url(#arrow)" />

                        <path d={`M ${startX_i} ${startY_i} A ${radius} ${radius} 0 0 0 ${endX_i} ${endY_i}`} fill="none" stroke="#2563eb" strokeWidth="2" />
                        <text x={CENTER_X - 15} y={CENTER_Y - 50} className="text-sm font-bold fill-blue-600">i</text>

                        <path d={`M ${startX_r} ${startY_r} A ${radius} ${radius} 0 0 1 ${endX_r} ${endY_r}`} fill="none" stroke="#16a34a" strokeWidth="2" />
                        <text x={CENTER_X + 8} y={CENTER_Y + 55} className="text-sm font-bold fill-green-600">r</text>

                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#ef4444" />
                            </marker>
                        </defs>
                        </svg>
                    </div>

                    <div className="space-y-4 text-slate-700">
                        <div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <h3 className="font-bold text-lg mb-2">é—œéµè©å½™ï¼š</h3>
                        <ul className="list-disc pl-5 space-y-2">
                            <li><span className="font-bold text-red-500">å…¥å°„ç·š</span>ï¼šå°„å‘ç•Œé¢çš„å…‰ç·šã€‚</li>
                            <li><span className="font-bold text-red-500">æŠ˜å°„ç·š</span>ï¼šç©¿éç•Œé¢å¾Œæ”¹è®Šæ–¹å‘çš„å…‰ç·šã€‚</li>
                            <li><span className="font-bold text-gray-500">æ³•ç·š (Normal)</span>ï¼šå‚ç›´æ–¼ç•Œé¢çš„è™›ç·š (å¿…é ˆç•«æˆè™›ç·š)ã€‚</li>
                            <li><span className="font-bold text-blue-600">å…¥å°„è§’ (i)</span>ï¼šå…¥å°„ç·šèˆ‡æ³•ç·šçš„å¤¾è§’ã€‚</li>
                            <li><span className="font-bold text-green-600">æŠ˜å°„è§’ (r)</span>ï¼šæŠ˜å°„ç·šèˆ‡æ³•ç·šçš„å¤¾è§’ã€‚</li>
                        </ul>
                        </div>
                        <p className="text-sm text-slate-500 italic">æ³¨æ„ï¼šæ‰€æœ‰è§’åº¦éƒ½æ˜¯èˆ‡ã€Œæ³•ç·šã€æ¸¬é‡çš„ï¼Œä¸æ˜¯èˆ‡ç•Œé¢ï¼</p>
                    </div>
                    </div>
                </div>
                );
            };

            // --- SLIDE 2: åå‘åŸå›  ---
            const MechanismSlide = () => {
                return (
                <div className="flex flex-col items-center h-full">
                    <h2 className="text-2xl font-bold text-purple-800 mb-2">ç¬¬äºŒç« ï¼šç‚ºä»€éº¼å…‰ç·šæœƒåæŠ˜ï¼Ÿ</h2>
                    <p className="mb-4 text-slate-600 text-center max-w-2xl">
                    å…‰åœ¨ä¸åŒä»‹è³ªä¸­çš„<span className="font-bold text-purple-600">é€Ÿåº¦ä¸åŒ</span>ã€‚é€™èˆ‡ä»‹è³ªçš„<span className="font-bold">æŠ˜å°„ç‡ (Refractive Index, n)</span> æœ‰é—œã€‚
                    </p>
                    
                    <div className="mb-6 bg-purple-50 px-6 py-3 rounded-lg border border-purple-200 text-center">
                        <span className="text-xl font-bold text-purple-900">æŠ˜å°„ç‡ n æ„ˆé«˜ â®• å…‰é€Ÿæ„ˆæ…¢</span>
                        <p className="text-sm text-purple-700 mt-1">ä¾‹å¦‚ï¼šå…‰åœ¨ç»ç’ƒ (n=1.5) ä¸­æ¯”åœ¨æ°´ (n=1.33) ä¸­æ›´æ…¢</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-5xl">
                    <div className="bg-white p-4 rounded-xl shadow-md border-t-4 border-indigo-500 flex flex-col items-center">
                        <h3 className="font-bold text-lg mb-2">æƒ…æ³ 1ï¼šä½ n â†’ é«˜ n</h3>
                        <div className="text-sm text-slate-500 mb-2">(ä¾‹å¦‚ï¼šç©ºæ°£ n=1.0 â†’ ç»ç’ƒ n=1.5)</div>
                        <div className="text-xs bg-indigo-100 px-2 py-1 rounded mb-4 text-indigo-800 font-bold">é€Ÿåº¦è®Šæ…¢ â†’ åå‘æ³•ç·š</div>
                        <svg width={200} height={200} className="overflow-visible bg-gray-50 rounded-lg">
                        <rect x="0" y="100" width="200" height="100" fill="#cbd5e1" opacity="0.5" />
                        <line x1="0" y1="100" x2="200" y2="100" stroke="#334155" />
                        <line x1="100" y1="0" x2="100" y2="200" stroke="#94a3b8" strokeDasharray="4,4" />
                        <line x1="40" y1="20" x2="100" y2="100" stroke="#ef4444" strokeWidth="2" markerEnd="url(#arrow-sm)" />
                        <line x1="100" y1="100" x2="120" y2="180" stroke="#ef4444" strokeWidth="2" markerEnd="url(#arrow-sm)" />
                        <text x="10" y="90" fontSize="10" fill="#64748b">ä½æŠ˜å°„ç‡ (å¿«)</text>
                        <text x="10" y="120" fontSize="10" fill="#1e293b" fontWeight="bold">é«˜æŠ˜å°„ç‡ (æ…¢)</text>
                        <text x="130" y="150" fontSize="10" fill="#4338ca" fontWeight="bold">åå‘æ³•ç·š</text>
                        </svg>
                    </div>

                    <div className="bg-white p-4 rounded-xl shadow-md border-t-4 border-orange-500 flex flex-col items-center">
                        <h3 className="font-bold text-lg mb-2">æƒ…æ³ 2ï¼šé«˜ n â†’ ä½ n</h3>
                        <div className="text-sm text-slate-500 mb-2">(ä¾‹å¦‚ï¼šç»ç’ƒ n=1.5 â†’ ç©ºæ°£ n=1.0)</div>
                        <div className="text-xs bg-orange-100 px-2 py-1 rounded mb-4 text-orange-800 font-bold">é€Ÿåº¦è®Šå¿« â†’ åé›¢æ³•ç·š</div>
                        <svg width={200} height={200} className="overflow-visible bg-gray-50 rounded-lg">
                        <rect x="0" y="0" width="200" height="100" fill="#cbd5e1" opacity="0.5" />
                        <line x1="0" y1="100" x2="200" y2="100" stroke="#334155" />
                        <line x1="100" y1="0" x2="100" y2="200" stroke="#94a3b8" strokeDasharray="4,4" />
                        <line x1="60" y1="20" x2="100" y2="100" stroke="#ef4444" strokeWidth="2" markerEnd="url(#arrow-sm)" />
                        <line x1="100" y1="100" x2="160" y2="160" stroke="#ef4444" strokeWidth="2" markerEnd="url(#arrow-sm)" />
                        <text x="10" y="90" fontSize="10" fill="#1e293b" fontWeight="bold">é«˜æŠ˜å°„ç‡ (æ…¢)</text>
                        <text x="10" y="120" fontSize="10" fill="#64748b">ä½æŠ˜å°„ç‡ (å¿«)</text>
                        <text x="130" y="130" fontSize="10" fill="#ea580c" fontWeight="bold">åé›¢æ³•ç·š</text>
                        <defs>
                            <marker id="arrow-sm" markerWidth="6" markerHeight="6" refX="5" refY="1.5" orient="auto">
                            <path d="M0,0 L0,3 L5,1.5 z" fill="#ef4444" />
                            </marker>
                        </defs>
                        </svg>
                    </div>
                    </div>
                    
                    <div className="mt-8 bg-yellow-50 p-4 rounded-lg border-2 border-yellow-300 text-center max-w-2xl shadow-sm">
                    <p className="font-bold text-yellow-900 text-lg mb-1">ğŸ”¥ å¿…èƒŒå£è¨£ ğŸ”¥</p>
                    <p className="text-2xl font-black text-blue-800 my-2">ã€Œä½é«˜å‘ï¼Œé«˜ä½é›¢ã€</p>
                    <div className="text-left text-sm text-yellow-800 mt-2 space-y-1 bg-white p-3 rounded">
                        <p>1. <span className="font-bold">ä½</span>æŠ˜å°„ç‡ å…¥ <span className="font-bold">é«˜</span>æŠ˜å°„ç‡ â®• å<span className="font-bold text-red-600">å‘</span>æ³•ç·š</p>
                        <p>2. <span className="font-bold">é«˜</span>æŠ˜å°„ç‡ å…¥ <span className="font-bold">ä½</span>æŠ˜å°„ç‡ â®• å<span className="font-bold text-red-600">é›¢</span>æ³•ç·š</p>
                    </div>
                    </div>
                </div>
                );
            };

            // --- PROBLEM SLIDE COMPONENT ---
            const Fraction = ({ top, bottom }) => (
                <span className="inline-flex flex-col items-center justify-center align-middle mx-1.5 -translate-y-1">
                <span className="border-b border-white leading-tight px-1 pb-0.5">{top}</span>
                <span className="leading-tight pt-0.5">{bottom}</span>
                </span>
            );

            const ProblemSlide = ({ title, scenario, targetVar, values }) => {
                const [animStep, setAnimStep] = useState(0); 

                const startProblemAnimation = () => {
                setAnimStep(1);
                };

                const nextAnimStep = () => {
                    setAnimStep(prev => Math.min(prev + 1, 7));
                }

                useEffect(() => {
                    setAnimStep(0);
                }, [title]);

                const { n1, n2, theta1, theta2 } = values;
                const rad1 = theta1 * Math.PI / 180;
                const rad2 = theta2 * Math.PI / 180;
                
                const sin1Val = Math.sin(rad1).toFixed(4);
                const sin2Val = Math.sin(rad2).toFixed(4);
                const term1Val = (n1 * Math.sin(rad1)).toFixed(4);
                const term2Val = (n2 * Math.sin(rad2)).toFixed(4);

                const startX = CENTER_X - RAY_LENGTH * Math.sin(rad1);
                const startY = CENTER_Y - RAY_LENGTH * Math.cos(rad1);
                const endX = CENTER_X + RAY_LENGTH * Math.sin(rad2);
                const endY = CENTER_Y + RAY_LENGTH * Math.cos(rad2);

                const renderMathStep = () => {
                    const isFindTheta1 = targetVar === 'theta1';
                    const isFindTheta2 = targetVar === 'theta2';
                    const isFindN1 = targetVar === 'n1';
                    const isFindN2 = targetVar === 'n2';

                    const stepClass = "transition-all duration-500 ease-in-out my-2 p-2 rounded hover:bg-slate-700";
                    const currentClass = "bg-slate-700 border-l-4 border-yellow-400 pl-2";

                    return (
                        <div className="font-mono text-lg space-y-2 text-left w-full max-w-md mx-auto">
                            {/* Step 1: Formula */}
                            {animStep >= 1 && (
                                <div className={`${stepClass} ${animStep === 1 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">1. å¯«ä¸‹å…¬å¼</span>
                                    nâ‚ sin Î¸â‚ = nâ‚‚ sin Î¸â‚‚
                                </div>
                            )}

                            {/* Step 2: Substitution */}
                            {animStep >= 2 && (
                                <div className={`${stepClass} ${animStep === 2 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">2. ä»£å…¥æ•¸å€¼</span>
                                    {isFindN1 ? 'nâ‚' : n1} Ã— sin({isFindTheta1 ? 'Î¸â‚' : theta1}) = {isFindN2 ? 'nâ‚‚' : n2} Ã— sin({isFindTheta2 ? 'Î¸â‚‚' : theta2})
                                </div>
                            )}

                            {/* Step 3: Calculation */}
                            {animStep >= 3 && (
                                <div className={`${stepClass} ${animStep === 3 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">3. è¨ˆç®—å·²çŸ¥æ•¸å€¼</span>
                                    {(isFindN1 || isFindTheta1) ? 
                                        <>{isFindN1 ? 'nâ‚' : n1} Ã— {isFindTheta1 ? `sin Î¸â‚` : sin1Val} = {term2Val}</> :
                                        <>{term1Val} = {isFindN2 ? 'nâ‚‚' : n2} Ã— {isFindTheta2 ? `sin Î¸â‚‚` : sin2Val}</>
                                    }
                                </div>
                            )}

                            {/* Step 4: Transposition (Fraction) */}
                            {animStep >= 4 && (
                                <div className={`${stepClass} ${animStep === 4 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">4. ç§»é … (å°‡æœªçŸ¥æ•¸ç•™åœ¨å·¦é‚Š)</span>
                                    {isFindTheta1 && <>sin Î¸â‚ = <Fraction top={term2Val} bottom={n1} /></>}
                                    {isFindTheta2 && <>sin Î¸â‚‚ = <Fraction top={term1Val} bottom={n2} /></>}
                                    {isFindN1 && <>nâ‚ = <Fraction top={term2Val} bottom={sin1Val} /></>}
                                    {isFindN2 && <>nâ‚‚ = <Fraction top={term1Val} bottom={sin2Val} /></>}
                                </div>
                            )}

                            {/* Step 5: Division Result */}
                            {animStep >= 5 && (
                                <div className={`${stepClass} ${animStep === 5 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">5. è¨ˆç®—é™¤æ³•çµæœ</span>
                                    {isFindTheta1 && `sin Î¸â‚ = ${(term2Val/n1).toFixed(4)}`}
                                    {isFindTheta2 && `sin Î¸â‚‚ = ${(term1Val/n2).toFixed(4)}`}
                                    {isFindN1 && <span className="text-yellow-300 font-bold">nâ‚ = {(term2Val/sin1Val).toFixed(2)} (ç­”æ¡ˆ)</span>}
                                    {isFindN2 && <span className="text-yellow-300 font-bold">nâ‚‚ = {(term1Val/sin2Val).toFixed(2)} (ç­”æ¡ˆ)</span>}
                                </div>
                            )}

                            {/* Step 6: Final Answer (No sin^-1 line) */}
                            {animStep >= 6 && (isFindTheta1 || isFindTheta2) && (
                                <div className={`${stepClass} ${animStep === 6 ? currentClass : ''}`}>
                                    <span className="text-gray-400 block text-xs mb-1">6. ä½¿ç”¨é€†æ­£å¼¦ (Shift sin)</span>
                                    {isFindTheta1 && <span className="text-yellow-300 font-bold block">Î¸â‚ = {theta1}Â° (ç­”æ¡ˆ)</span>}
                                    {isFindTheta2 && <span className="text-yellow-300 font-bold block">Î¸â‚‚ = {theta2}Â° (ç­”æ¡ˆ)</span>}
                                </div>
                            )}
                        </div>
                    );
                };

                const renderCalculator = () => {
                    if (animStep < 7) return null;
                    
                    const isAngle = targetVar.includes('theta');
                    const finalVal = targetVar === 'theta1' ? (term2Val/n1).toFixed(4) : 
                                    targetVar === 'theta2' ? (term1Val/n2).toFixed(4) : 
                                    targetVar === 'n1' ? (term2Val/sin1Val) : (term1Val/sin2Val);

                    const keys = [];
                    if (isAngle) {
                        keys.push('SHIFT', 'sin', '(', ...finalVal.toString().split(''), ')', '=');
                    } else {
                        const top = targetVar === 'n1' ? term2Val : term1Val;
                        const bot = targetVar === 'n1' ? sin1Val : sin2Val;
                        keys.push(...top.toString().split(''), 'Ã·', ...bot.toString().split(''), '=');
                    }

                    return (
                        <div className="mt-4 p-4 bg-gray-900 rounded-lg border border-gray-600 animate-fade-in-up">
                            <div className="text-xs text-gray-400 mb-2 flex items-center gap-2">
                                <Calculator size={14}/> è¨ˆç®—æ©ŸæŒ‰æ³•åƒè€ƒ (Casio):
                            </div>
                            <div className="flex flex-wrap gap-2 justify-center">
                                {keys.map((k, i) => (
                                    <span key={i} className={`px-2 py-1 rounded text-sm font-bold shadow-sm border-b-2 active:border-b-0 active:translate-y-[2px] transition-all
                                        ${k === 'SHIFT' ? 'bg-yellow-600 border-yellow-800 text-white' : 
                                        k === '=' ? 'bg-blue-600 border-blue-800 text-white' : 
                                        k === 'sin' ? 'bg-gray-700 border-gray-900 text-white' :
                                        'bg-gray-200 border-gray-400 text-gray-800'}`}>
                                        {k}
                                    </span>
                                ))}
                            </div>
                            {isAngle && <div className="text-center text-xs text-yellow-500 mt-2">æ³¨æ„ï¼šç¢ºä¿è¨ˆç®—æ©Ÿè¨­å®šåœ¨ DEG (è§’åº¦) æ¨¡å¼</div>}
                        </div>
                    );
                };

                const getArcPath = (startAngleRad, isTop) => {
                    const r = 40;
                    const startX_arc = CENTER_X;
                    const startY_arc = isTop ? CENTER_Y - r : CENTER_Y + r; 
                    const endX_arc = CENTER_X + r * Math.sin(startAngleRad) * (isTop ? -1 : 1);
                    const endY_arc = CENTER_Y + r * Math.cos(startAngleRad) * (isTop ? -1 : 1);
                    return `M ${startX_arc} ${startY_arc} A ${r} ${r} 0 0 ${isTop ? 0 : 1} ${endX_arc} ${endY_arc}`;
                };

                // Dynamic Label Positioning based on question type and angle
                const theta1X = theta1 > 35 ? CENTER_X - 25 : CENTER_X - 70;
                const theta2X = CENTER_X + Math.max(50, 70 * Math.tan(rad2) + 15);

                return (
                <div className="flex flex-col h-full items-center">
                    <div className="w-full max-w-4xl flex flex-col md:flex-row md:items-center gap-4 mb-4">
                        <div>
                            <span className="bg-teal-600 text-white px-3 py-1 rounded text-sm font-bold inline-block mb-1">ç·´ç¿’é¡Œ</span>
                            <h2 className="text-xl font-bold text-teal-800">{title}</h2>
                        </div>
                        <div className="flex-1 bg-teal-50 border-l-4 border-teal-500 p-3 text-sm text-teal-900 rounded-r">
                            <span className="font-bold">æƒ…å¢ƒï¼š</span>{scenario}
                        </div>
                    </div>

                    <div className="flex flex-col lg:flex-row gap-6 w-full max-w-6xl justify-center items-start">
                        
                        <div className="relative bg-white rounded-xl shadow-lg border border-slate-200 p-2 shrink-0 self-center lg:self-start">
                            <svg width={SVG_SIZE} height={SVG_SIZE} className="overflow-visible">
                            <rect x="0" y="0" width={SVG_SIZE} height={CENTER_Y} fill={`rgba(37, 99, 235, 0.1)`} />
                            <rect x="0" y={CENTER_Y} width={SVG_SIZE} height={CENTER_Y} fill={`rgba(22, 163, 74, 0.1)`} />
                            <line x1="0" y1={CENTER_Y} x2={SVG_SIZE} y2={CENTER_Y} stroke="#334155" strokeWidth="2" />
                            <line x1={CENTER_X} y1="0" x2={CENTER_X} y2={SVG_SIZE} stroke="#94a3b8" strokeWidth="2" strokeDasharray="5,5" />
                            <text x="10" y="30" className={`text-lg font-bold ${targetVar === 'n1' ? 'fill-red-600' : 'fill-blue-800'}`}>
                                nâ‚ = {targetVar === 'n1' ? '?' : n1}
                            </text>
                            <text x="10" y={SVG_SIZE - 20} className={`text-lg font-bold ${targetVar === 'n2' ? 'fill-red-600' : 'fill-green-800'}`}>
                                nâ‚‚ = {targetVar === 'n2' ? '?' : n2}
                            </text>
                            <line x1={startX} y1={startY} x2={CENTER_X} y2={CENTER_Y} stroke="#ef4444" strokeWidth="3" markerEnd="url(#arrow-prob)" />
                            <line x1={CENTER_X} y1={CENTER_Y} x2={endX} y2={endY} stroke="#ef4444" strokeWidth="3" markerEnd="url(#arrow-prob)" />
                            <path d={getArcPath(rad1, true)} fill="none" stroke="#2563eb" strokeWidth="2" />
                            {/* Dynamic Position for Theta1 */}
                            <text x={theta1X} y={CENTER_Y - 50} className={`text-lg font-bold ${targetVar === 'theta1' ? 'fill-red-600' : 'fill-blue-700'}`}>
                                Î¸â‚={targetVar === 'theta1' ? '?' : theta1 + 'Â°'}
                            </text>
                            <path d={getArcPath(rad2, false)} fill="none" stroke="#16a34a" strokeWidth="2" />
                            {/* Dynamic Position for Theta2 */}
                            <text x={theta2X} y={CENTER_Y + 70} className={`text-lg font-bold ${targetVar === 'theta2' ? 'fill-red-600' : 'fill-green-700'}`}>
                                Î¸â‚‚={targetVar === 'theta2' ? '?' : theta2 + 'Â°'}
                            </text>
                            <defs>
                                <marker id="arrow-prob" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#ef4444" />
                                </marker>
                            </defs>
                            </svg>
                        </div>

                        <div className="flex-1 w-full">
                            <div className="bg-slate-800 text-white p-4 rounded-xl shadow-xl min-h-[400px] flex flex-col">
                                <div className="text-center text-gray-400 text-sm mb-2 border-b border-gray-600 pb-2">
                                    {animStep === 0 ? "é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹è§£é¡Œ" : `è§£é¡Œæ­¥é©Ÿ (${animStep}/7)`}
                                </div>
                                
                                <div className="flex-grow flex flex-col justify-center">
                                    {animStep === 0 && (
                                        <div className="text-center text-gray-500 py-10">
                                            <Play size={48} className="mx-auto mb-4 opacity-50"/>
                                            æº–å‚™å¥½å¾Œï¼Œé»æ“ŠæŒ‰éˆ•é–‹å§‹
                                        </div>
                                    )}
                                    {renderMathStep()}
                                    {renderCalculator()}
                                </div>
                            </div>

                            <div className="mt-4 flex gap-3">
                                <button 
                                    onClick={startProblemAnimation}
                                    className={`flex-1 py-3 rounded-lg font-bold shadow-md flex items-center justify-center gap-2 transition-colors
                                        ${animStep > 0 ? 'bg-gray-200 text-gray-600 hover:bg-gray-300' : 'bg-teal-600 text-white hover:bg-teal-700'}`}
                                >
                                    <RotateCcw size={18}/> é‡æ–°é–‹å§‹
                                </button>
                                <button 
                                    onClick={nextAnimStep}
                                    disabled={animStep >= 7 || animStep === 0}
                                    className={`flex-[2] py-3 rounded-lg font-bold shadow-md flex items-center justify-center gap-2 transition-colors
                                        ${animStep === 0 || animStep >= 7 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700 animate-pulse'}`}
                                >
                                    ä¸‹ä¸€æ­¥ <ChevronRight size={18}/>
                                </button>
                            </div>
                            <p className="text-center text-xs text-gray-400 mt-2">æç¤ºï¼šè«‹è·Ÿéš¨æ­¥é©Ÿå˜—è©¦åœ¨ç´™ä¸Šè¨ˆç®—</p>
                        </div>
                    </div>
                </div>
                );
            };

            // --- NEW: GRAPH SLIDE COMPONENT ---
            const GraphSlide = () => {
                const [step, setStep] = useState(0);

                const nextStep = () => setStep(s => Math.min(s + 1, 8));
                const resetStep = () => setStep(0);

                // Graph Coordinates with Grid
                const G_ORIGIN_X = 40;
                const G_ORIGIN_Y = 260; // Slightly higher origin for labels
                const SCALE = 200; // 200px = 1.0 unit
                const GRID_STEP = 0.1;
                
                const MAX_X_VAL = 0.8; // sin r max around 0.8
                const MAX_Y_VAL = 1.0; // sin i max 1.0

                const MAX_X_PX = MAX_X_VAL * SCALE;
                const MAX_Y_PX = MAX_Y_VAL * SCALE;

                // Experimental Data Table
                const experimentData = [
                    { i: 13, r: 9, sinI: 0.23, sinR: 0.15 },
                    { i: 29, r: 19, sinI: 0.49, sinR: 0.32 },
                    { i: 42, r: 27, sinI: 0.67, sinR: 0.45 },
                    { i: 59, r: 35, sinI: 0.86, sinR: 0.58 },
                ];

                const dataPoints = experimentData.map(d => ({ x: d.sinR, y: d.sinI }));
                const p1 = { x: 0.1, y: 0.15 }; 
                const p2 = { x: 0.6, y: 0.90 }; 

                const toScreen = (val, isY) => isY ? G_ORIGIN_Y - val * SCALE : G_ORIGIN_X + val * SCALE;

                // Grid Generation
                const renderGrid = () => {
                    const lines = [];
                    const labels = [];
                    
                    // Vertical Lines (X-axis steps)
                    for (let v = 0; v <= MAX_X_VAL + 0.05; v += GRID_STEP) {
                        const x = toScreen(v, false);
                        if (Math.abs(v) < 0.01) continue; // Skip 0 line (drawn by axis)
                        lines.push(
                            <line key={`v${v}`} x1={x} y1={G_ORIGIN_Y} x2={x} y2={G_ORIGIN_Y - MAX_Y_PX} stroke="#e5e7eb" strokeWidth="1" />
                        );
                        labels.push(
                            <text key={`vl${v}`} x={x} y={G_ORIGIN_Y + 15} textAnchor="middle" className="text-[10px] fill-gray-500">{v.toFixed(1)}</text>
                        );
                    }

                    // Horizontal Lines (Y-axis steps)
                    for (let v = 0; v <= MAX_Y_VAL; v += GRID_STEP) {
                        const y = toScreen(v, true);
                        if (Math.abs(v) < 0.01) continue;
                        lines.push(
                            <line key={`h${v}`} x1={G_ORIGIN_X} y1={y} x2={G_ORIGIN_X + MAX_X_PX} y2={y} stroke="#e5e7eb" strokeWidth="1" />
                        );
                        labels.push(
                            <text key={`hl${v}`} x={G_ORIGIN_X - 10} y={y + 3} textAnchor="end" className="text-[10px] fill-gray-500">{v.toFixed(1)}</text>
                        );
                    }
                    return { lines, labels };
                };

                const { lines: gridLines, labels: gridLabels } = renderGrid();

                return (
                    <div className="flex flex-col h-full items-center">
                        <div className="w-full max-w-4xl flex items-center gap-2 mb-4">
                            <span className="bg-purple-600 text-white px-3 py-1 rounded text-sm font-bold">å¯¦é©—åˆ†æ</span>
                            <h2 className="text-2xl font-bold text-purple-800">ç¹ªç•«åœ–åƒï¼šsin i å° sin r</h2>
                        </div>

                        <div className="flex flex-col lg:flex-row gap-8 w-full max-w-5xl justify-center items-start">
                            
                            {/* Graph Visual */}
                            <div className="bg-white p-4 rounded-xl shadow-lg border border-purple-200 relative min-w-[300px] flex justify-center">
                                <svg width={SVG_SIZE} height={SVG_SIZE} className="overflow-visible">
                                    
                                    {/* Grid Lines */}
                                    {step >= 2 && gridLines}

                                    {/* Axes */}
                                    <line x1={G_ORIGIN_X} y1={G_ORIGIN_Y} x2={G_ORIGIN_X + MAX_X_PX + 20} y2={G_ORIGIN_Y} stroke="black" strokeWidth="2" markerEnd="url(#arrow-graph)" />
                                    <line x1={G_ORIGIN_X} y1={G_ORIGIN_Y} x2={G_ORIGIN_X} y2={G_ORIGIN_Y - MAX_Y_PX - 20} stroke="black" strokeWidth="2" markerEnd="url(#arrow-graph)" />
                                    
                                    {/* Labels (Step 2+) */}
                                    {step >= 2 && (
                                        <>
                                            {gridLabels}
                                            <text x={G_ORIGIN_X + MAX_X_PX + 15} y={G_ORIGIN_Y + 15} className="font-bold text-xs fill-green-700">sin r (x)</text>
                                            <text x={G_ORIGIN_X - 10} y={G_ORIGIN_Y - MAX_Y_PX - 15} className="font-bold text-xs fill-blue-700">sin i (y)</text>
                                            <text x={G_ORIGIN_X - 10} y={G_ORIGIN_Y + 15} className="text-xs text-gray-500">0</text>
                                        </>
                                    )}

                                    {/* Data Points (Step 3+) */}
                                    {step >= 3 && dataPoints.map((pt, i) => (
                                        <text key={i} x={toScreen(pt.x, false)} y={toScreen(pt.y, true)} textAnchor="middle" dominantBaseline="middle" className="text-xs fill-red-500 font-sans font-bold" fontSize="10">x</text>
                                    ))}

                                    {/* Line of Best Fit (Step 4+) */}
                                    {step >= 4 && (
                                        <line 
                                            x1={G_ORIGIN_X} y1={G_ORIGIN_Y} 
                                            x2={toScreen(0.65, false)} y2={toScreen(0.975, true)} 
                                            stroke="#9333ea" strokeWidth="2" 
                                            className="animate-draw"
                                        />
                                    )}

                                    {/* Selected Points (Step 5+) */}
                                    {step >= 5 && (
                                        <>
                                            <circle cx={toScreen(p1.x, false)} cy={toScreen(p1.y, true)} r="4" fill="blue" stroke="white" strokeWidth="1"/>
                                            <circle cx={toScreen(p2.x, false)} cy={toScreen(p2.y, true)} r="4" fill="blue" stroke="white" strokeWidth="1"/>
                                            
                                            {/* Dashed Lines */}
                                            <line x1={toScreen(p1.x, false)} y1={toScreen(p1.y, true)} x2={toScreen(p2.x, false)} y2={toScreen(p1.y, true)} stroke="blue" strokeDasharray="3,3" />
                                            <line x1={toScreen(p2.x, false)} y1={toScreen(p1.y, true)} x2={toScreen(p2.x, false)} y2={toScreen(p2.y, true)} stroke="blue" strokeDasharray="3,3" />
                                        </>
                                    )}

                                    {/* Coordinates (Step 6+) */}
                                    {step >= 6 && (
                                        <>
                                            <text x={toScreen(p1.x, false) + 8} y={toScreen(p1.y, true) + 15} className="text-xs font-bold fill-blue-700 bg-white">({p1.x.toFixed(2)}, {p1.y.toFixed(2)})</text>
                                            <text x={toScreen(p2.x, false) - 60} y={toScreen(p2.y, true) - 10} className="text-xs font-bold fill-blue-700 bg-white">({p2.x.toFixed(2)}, {p2.y.toFixed(2)})</text>
                                        </>
                                    )}

                                    <defs>
                                        <marker id="arrow-graph" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M0,0 L0,6 L9,3 z" fill="black" />
                                        </marker>
                                    </defs>
                                </svg>
                            </div>

                            {/* Instruction Panel */}
                            <div className="flex-1 space-y-4">
                                
                                <div className="bg-slate-800 text-white p-4 rounded-lg min-h-[220px] flex flex-col justify-center shadow-xl">
                                    {step === 0 && (
                                        <div className="text-center">
                                            <h3 className="text-xl font-bold text-yellow-400 mb-2">å¦‚ä½•è¨ˆç®—æŠ˜å°„ç‡ï¼Ÿ</h3>
                                            <p className="text-gray-300">é€éç¹ªç•«åœ–åƒï¼Œæˆ‘å€‘å¯ä»¥æ›´æº–ç¢ºåœ°æ‰¾å‡ºæŠ˜å°„ç‡ã€‚<br/>è«‹è·Ÿéš¨æ­¥é©Ÿä¸€èµ·å®Œæˆåœ–è¡¨ã€‚</p>
                                        </div>
                                    )}

                                    {step === 1 && (
                                        <div className="w-full">
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 1: æ•¸æ“šè¨˜éŒ„èˆ‡è™•ç†</p>
                                            <p className="text-sm text-gray-200 mb-2">è¨˜éŒ„å¯¦é©—è§’åº¦ï¼Œä¸¦è¨ˆç®—æ­£å¼¦å€¼ (sin)ï¼š</p>
                                            <div className="overflow-x-auto">
                                                <table className="w-full text-sm text-center border-collapse">
                                                    <thead>
                                                        <tr className="bg-gray-700 text-gray-200">
                                                            <th className="p-1 border border-gray-600">å…¥å°„è§’ i (Â°)</th>
                                                            <th className="p-1 border border-gray-600">æŠ˜å°„è§’ r (Â°)</th>
                                                            <th className="p-1 border border-gray-600 bg-blue-900/50">sin i (yè»¸åº§æ¨™)</th>
                                                            <th className="p-1 border border-gray-600 bg-green-900/50">sin r (xè»¸åº§æ¨™)</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {experimentData.map((row, idx) => (
                                                            <tr key={idx} className="border border-gray-600">
                                                                <td className="p-1">{row.i}</td>
                                                                <td className="p-1">{row.r}</td>
                                                                <td className="p-1 font-mono text-blue-300">{row.sinI.toFixed(2)}</td>
                                                                <td className="p-1 font-mono text-green-300">{row.sinR.toFixed(2)}</td>
                                                            </tr>
                                                        ))}
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    )}
                                    
                                    {step === 2 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 2: å»ºç«‹åæ¨™è»¸</p>
                                            <p className="text-sm text-gray-200 mb-2">æ ¹æ“šè¡¨æ ¼æ•¸æ“šç¯„åœï¼Œè¨­å®šåˆé©çš„åˆ»åº¦ï¼š</p>
                                            <ul className="list-disc pl-5 space-y-2 text-sm text-gray-200">
                                                <li>ç¸±è»¸ (y): <span className="font-bold text-blue-400">sin i</span> (æ¯æ ¼ 0.1ï¼Œæœ€å¤§ 1.0)</li>
                                                <li>æ©«è»¸ (x): <span className="font-bold text-green-400">sin r</span> (æ¯æ ¼ 0.1ï¼Œæœ€å¤§ 0.8)</li>
                                            </ul>
                                        </div>
                                    )}

                                    {step === 3 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 3: æ¨™è¨˜æ•¸æ“šé»</p>
                                            <p className="text-sm text-gray-200">æ ¹æ“šè¡¨æ ¼æ•¸æ“šï¼Œç”¨ 'x' è™Ÿåœ¨æ–¹æ ¼ç´™ä¸Šæ¨™å‡ºå„é»ä½ç½®ã€‚</p>
                                        </div>
                                    )}

                                    {step === 4 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 4: ç¹ªç•«æœ€ä½³æ“¬åˆç›´ç·š</p>
                                            <ul className="list-disc pl-5 space-y-2 text-sm text-gray-200">
                                                <li>ç•«ä¸€æ¢ç›´ç·šï¼Œç›¡é‡ç©¿éæœ€å¤šçš„é»ã€‚</li>
                                                <li>ç¢ºä¿ç›´ç·šå…©å´çš„é»åˆ†ä½ˆå¹³å‡ã€‚</li>
                                                <li><span className="font-bold text-red-400">é‡è¦ï¼š</span>æ ¹æ“šæ–¯æ¶…è€³å®šå¾‹ï¼Œç›´ç·šå¿…é ˆç©¿éåŸé» (0,0)ã€‚</li>
                                            </ul>
                                        </div>
                                    )}

                                    {step === 5 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 5: é¸å–å…©é»è¨ˆç®—</p>
                                            <p className="text-sm text-gray-200">åœ¨<span className="font-bold text-purple-400">ç›´ç·šä¸Š</span>é¸å–å…©é» (è—é») ä¾†è¨ˆç®—æ–œç‡ã€‚</p>
                                            <div className="bg-slate-900 p-2 mt-2 rounded border-l-4 border-red-500 text-xs text-gray-300">
                                                æ³¨æ„ï¼šä¸è¦ç›´æ¥é¸å–åŸæœ¬çš„æ•¸æ“šé»(x)ï¼Œè¦é¸ç›´ç·šä¸Šçš„é»ï¼å…©é»è·é›¢è¶Šé ï¼Œèª¤å·®è¶Šå°ã€‚
                                            </div>
                                        </div>
                                    )}

                                    {step === 6 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 6: è®€å–åæ¨™</p>
                                            <p className="text-sm text-gray-200 mb-2">è®€å‡ºå…©é»çš„åæ¨™ $(x, y)$ï¼š</p>
                                            <ul className="font-mono text-sm space-y-1 ml-4">
                                                <li>é» 1: ({p1.x.toFixed(2)}, {p1.y.toFixed(2)})</li>
                                                <li>é» 2: ({p2.x.toFixed(2)}, {p2.y.toFixed(2)})</li>
                                            </ul>
                                        </div>
                                    )}

                                    {step === 7 && (
                                        <div>
                                            <p className="font-bold text-yellow-400 text-lg mb-2">Step 7: è¨ˆç®—æ–œç‡ (Slope)</p>
                                            <div className="font-mono text-sm bg-slate-900 p-2 rounded text-center">
                                                <p className="mb-2">å…¬å¼ï¼š m = <Fraction top="yâ‚‚ - yâ‚" bottom="xâ‚‚ - xâ‚" /></p>
                                                <p>m = <Fraction top={`${p2.y.toFixed(2)} - ${p1.y.toFixed(2)}`} bottom={`${p2.x.toFixed(2)} - ${p1.x.toFixed(2)}`} /> = <Fraction top="0.75" bottom="0.50" /> = <span className="text-xl font-bold text-yellow-300">1.5</span></p>
                                            </div>
                                        </div>
                                    )}

                                    {step === 8 && (
                                        <div className="text-center">
                                            <CheckCircle className="mx-auto text-green-500 mb-2" size={32}/>
                                            <p className="font-bold text-yellow-400 text-lg">Step 8: å¾—å‡ºçµè«–</p>
                                            <p className="text-white mt-2">ç›´ç·šçš„æ–œç‡ = æŠ˜å°„ç‡ (n)</p>
                                            <div className="mt-3 p-2 bg-green-900/50 rounded border border-green-500/50 font-bold">
                                                n = 1.5
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="flex gap-2 mt-4">
                                    <button onClick={resetStep} className="p-3 bg-gray-200 rounded-lg hover:bg-gray-300 text-gray-700 transition-colors shadow-sm" title="é‡æ–°é–‹å§‹">
                                        <RotateCcw size={20}/>
                                    </button>
                                    <button 
                                        onClick={nextStep} 
                                        className={`flex-1 py-3 rounded-lg font-bold shadow-md flex justify-center items-center gap-2 transition-all
                                            ${step >= 8 ? 'bg-green-600 text-white hover:bg-green-700' : 'bg-purple-600 text-white hover:bg-purple-700'}`}
                                    >
                                        {step >= 8 ? 'å®Œæˆæ•™å­¸' : 'ä¸‹ä¸€æ­¥'} <ChevronRight size={20}/>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const slides = [
                { component: <BasicConceptSlide />, title: "åŸºç¤æ¦‚å¿µ" },
                { component: <MechanismSlide />, title: "åæŠ˜åŸç†" },
                { 
                    component: <ProblemSlide 
                        title="é¡Œç›®ä¸€ï¼šæ±‚ä»‹è³ªæŠ˜å°„ç‡ nâ‚" 
                        scenario="å…‰ç·šç”±æŸæœªçŸ¥ä»‹è³ªå°„å…¥ç©ºæ°£ (n=1.0)ã€‚å·²çŸ¥å…¥å°„è§’ç‚º 30Â°ï¼ŒæŠ˜å°„è§’ç‚º 45Â°ã€‚æ±‚è©²æœªçŸ¥ä»‹è³ªçš„æŠ˜å°„ç‡ã€‚"
                        targetVar="n1" 
                        values={{ n1: 1.41, theta1: 30, n2: 1.0, theta2: 45 }} 
                    />, 
                    title: "ç·´ç¿’é¡Œ 1" 
                },
                { 
                    component: <ProblemSlide 
                        title="é¡Œç›®äºŒï¼šæ±‚å…¥å°„è§’ Î¸â‚" 
                        scenario="å…‰ç·šç”±ç©ºæ°£ (n=1.0) å°„å…¥æ°´ä¸­ (n=1.33)ã€‚è‹¥æŠ˜å°„è§’ç‚º 30Â°ï¼Œæ±‚å…¥å°„è§’æ˜¯å¤šå°‘ï¼Ÿ"
                        targetVar="theta1" 
                        values={{ n1: 1.0, theta1: 41.7, n2: 1.33, theta2: 30 }} 
                    />, 
                    title: "ç·´ç¿’é¡Œ 2" 
                },
                { 
                    component: <ProblemSlide 
                        title="é¡Œç›®ä¸‰ï¼šæ±‚å¡‘è† æŠ˜å°„ç‡ nâ‚‚" 
                        scenario="å…‰ç·šç”±ç©ºæ°£ (n=1.0) å°„å…¥æŸç¨®é€æ˜å¡‘è† ã€‚å…¥å°„è§’ç‚º 50Â°ï¼ŒæŠ˜å°„è§’ç‚º 30Â°ã€‚æ±‚è©²å¡‘è† çš„æŠ˜å°„ç‡ã€‚"
                        targetVar="n2" 
                        values={{ n1: 1.0, theta1: 50, n2: 1.53, theta2: 30 }} 
                    />, 
                    title: "ç·´ç¿’é¡Œ 3" 
                },
                { 
                    component: <ProblemSlide 
                        title="é¡Œç›®å››ï¼šæ±‚æ°´ä¸­æŠ˜å°„è§’ Î¸â‚‚" 
                        scenario="å…‰ç·šç”±æ°´ (n=1.33) å°„å…¥ç»ç’ƒ (n=1.5)ã€‚å…¥å°„è§’ç‚º 50Â°ï¼Œæ±‚ç»ç’ƒä¸­çš„æŠ˜å°„è§’ã€‚"
                        targetVar="theta2" 
                        values={{ n1: 1.33, theta1: 50, n2: 1.5, theta2: 42.8 }} 
                    />, 
                    title: "ç·´ç¿’é¡Œ 4" 
                },
                {
                    component: <GraphSlide />, title: "æ•¸æ“šåˆ†æ"
                }
            ];

            const totalSlides = slides.length;

            const nextSlide = () => setCurrentSlide(prev => Math.min(prev + 1, totalSlides - 1));
            const prevSlide = () => setCurrentSlide(prev => Math.max(prev - 1, 0));

            return (
                <div className="min-h-screen flex flex-col items-center">
                    {/* Header */}
                    <header className="w-full max-w-5xl bg-white shadow-sm rounded-xl p-4 mb-6 mt-6 flex justify-between items-center">
                        <div className="flex items-center gap-3">
                        <div className="bg-blue-600 text-white p-2 rounded-lg">
                            <BookOpen size={24} />
                        </div>
                        <div>
                            <h1 className="text-xl font-bold text-slate-800">ç‰©ç†è‡ªå­¸å–®å…ƒï¼šå…‰çš„æŠ˜å°„</h1>
                            <p className="text-xs text-slate-500">é¦™æ¸¯ä¸­ä¸‰ç‰©ç†èª²ç¨‹é©ç”¨</p>
                        </div>
                        </div>
                        <div className="text-sm font-medium text-slate-400">
                        é æ•¸ {currentSlide + 1} / {totalSlides}
                        </div>
                    </header>

                    {/* Main Content Area (Slide) */}
                    <main className="w-full max-w-5xl bg-white shadow-xl rounded-2xl overflow-hidden flex-grow min-h-[600px] flex flex-col relative border border-slate-200 mb-6">
                        
                        {/* Slide Content */}
                        <div className="flex-grow p-6 md:p-10 overflow-y-auto">
                        {slides[currentSlide].component}
                        </div>

                        {/* Navigation Bar */}
                        <div className="bg-slate-100 p-4 flex justify-between items-center border-t border-slate-200">
                        <button 
                            onClick={prevSlide} 
                            disabled={currentSlide === 0}
                            className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${
                            currentSlide === 0 
                                ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                : 'bg-white text-blue-600 hover:bg-blue-50 border border-blue-200 shadow-sm'
                            }`}
                        >
                            <ChevronLeft size={20} /> ä¸Šä¸€é 
                        </button>

                        {/* Progress Dots */}
                        <div className="flex gap-2">
                            {slides.map((_, index) => (
                            <div 
                                key={index}
                                className={`w-3 h-3 rounded-full transition-all duration-300 ${
                                index === currentSlide ? 'bg-blue-600 w-6' : 'bg-gray-300'
                                }`}
                            />
                            ))}
                        </div>

                        <button 
                            onClick={nextSlide} 
                            disabled={currentSlide === totalSlides - 1}
                            className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-colors ${
                            currentSlide === totalSlides - 1 
                                ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                : 'bg-blue-600 text-white hover:bg-blue-700 shadow-md'
                            }`}
                        >
                            ä¸‹ä¸€é  <ChevronRight size={20} />
                        </button>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SnellsLawLearning />);
    </script>
</body>

</html>
